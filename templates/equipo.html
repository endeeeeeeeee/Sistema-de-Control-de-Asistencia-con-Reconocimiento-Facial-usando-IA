<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gesti√≥n de Equipo - CLASS VISION</title>
    <link rel="stylesheet" href="/static/css/equipo.css">
</head>
<body>
    <div class="container">
        <a href="/dashboard" class="back-button">
            ‚Üê Volver al Dashboard
        </a>

        <div id="loading" class="section">
            <div class="loading">
                <div class="spinner"></div>
                <p>Cargando informaci√≥n del equipo...</p>
            </div>
        </div>

        <div id="teamContent" style="display: none;">
            <!-- Team Header -->
            <div class="team-header">
                <h1 class="team-title" id="teamName">Nombre del Equipo</h1>
                <div class="team-meta">
                    <span class="meta-badge" id="teamTypeBadge">UNIVERSIDAD</span>
                    <span class="meta-badge" id="myRoleBadge">MIEMBRO</span>
                </div>
                <p id="teamDescription" style="color: #64748b; line-height: 1.6;"></p>
                
                <div class="invitation-code">
                    <h3>C√≥digo de Invitaci√≥n</h3>
                    <div class="code-display" id="invitationCode">TEAM-ABC123</div>
                    <p style="font-size: 14px; margin-top: 8px; opacity: 0.9;">Comparte este c√≥digo para invitar nuevos miembros</p>
                </div>
            </div>

            <!-- Team Stats -->
            <div class="section">
                <h2 class="section-title">Estad√≠sticas del Equipo</h2>
                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-value" id="totalMiembros">0</div>
                        <div class="stat-label">Miembros Totales</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="asistenciasHoy">0</div>
                        <div class="stat-label">Asistencias Hoy</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-value" id="promedioAsistencia">0%</div>
                        <div class="stat-label">Promedio Asistencia</div>
                    </div>
                </div>
            </div>

            <!-- Members List -->
            <div class="section">
                <h2 class="section-title">Miembros del Equipo</h2>
                <div id="membersContent"></div>
            </div>

            <!-- Actions for Leaders -->
            <div id="leaderActions" class="section" style="display: none;">
                <h2 class="section-title">Acciones de Administrador</h2>
                
                <!-- Modo Guarder√≠a Toggle -->
                <div id="modoGuarderiaContainer" style="display: none; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 20px; border-radius: 16px; margin-bottom: 20px; border: 3px dashed #f59e0b; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.2);">
                    <div style="text-align: center; margin-bottom: 16px;">
                        <div style="font-size: 48px; margin-bottom: 8px;">üß∏</div>
                        <h3 style="color: #92400e; margin-bottom: 8px; font-size: 20px; font-weight: 700;">üß∏ MODO GUARDER√çA</h3>
                        <p style="color: #78350f; font-size: 14px; margin: 0 0 12px 0; font-weight: 500;">Seguridad reforzada para protecci√≥n infantil</p>
                    </div>
                    
                    <div style="background: white; padding: 16px; border-radius: 12px; margin-bottom: 16px; border-left: 4px solid #f59e0b;">
                        <h4 style="color: #92400e; margin: 0 0 12px 0; font-size: 15px;">Caracter√≠sticas de Seguridad:</h4>
                        <ul style="color: #78350f; font-size: 13px; margin: 0; padding-left: 20px; line-height: 1.8;">
                            <li><strong>Verificaci√≥n Dual:</strong> Tutor + Ni√±o</li>
                            <li><strong>Registro Fotogr√°fico:</strong> Cada entrada/salida</li>
                            <li><strong>Control de Horarios:</strong> Alertas autom√°ticas</li>
                            <li><strong>Log Completo:</strong> Qui√©n recogi√≥ al ni√±o y cu√°ndo</li>
                        </ul>
                    </div>
                    
                    <div style="display: flex; align-items: center; justify-content: space-between; background: #fed7aa; padding: 12px; border-radius: 8px;">
                        <div style="flex: 1;">
                            <span style="color: #92400e; font-weight: 600; font-size: 14px;">üîí Estado del Modo de Seguridad</span>
                        </div>
                        <label style="display: flex; align-items: center; cursor: pointer; background: white; padding: 8px 16px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                            <span style="margin-right: 10px; font-weight: 600; color: #92400e; font-size: 13px;">Activar</span>
                            <input type="checkbox" id="modoGuarderiaToggle" onchange="toggleModoGuarderia(this.checked)" style="width: 22px; height: 22px; cursor: pointer;">
                        </label>
                    </div>
                    
                    <div style="margin-top: 12px; text-align: center; font-size: 11px; color: #92400e; opacity: 0.8;">
                        üöß <em>Funcionalidad en desarrollo - Demo visual</em>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="iniciarSesionAsistencia()" style="
                    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
                    font-size: 16px;
                    padding: 14px 28px;
                    margin-bottom: 12px;
                ">
                    üìπ Iniciar Sesi√≥n de Asistencia
                </button>
                <button class="btn btn-primary" onclick="editTeam()">
                    ‚úèÔ∏è Editar Equipo
                </button>
                <button class="btn btn-primary" onclick="verReportes()">
                    Ver Reportes Detallados
                </button>
                <button class="btn btn-primary" onclick="generarQRVinculacion()">
                    Generar QR Dispositivo
                </button>
                <button class="btn btn-danger" onclick="confirmDeleteTeam()">
                    Eliminar Equipo
                </button>
            </div>
        </div>
    </div>

    <!-- QRCode.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="/static/js/equipo.js"></script>
</body>
</html>
